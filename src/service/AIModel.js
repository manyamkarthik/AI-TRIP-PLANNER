import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = process.env.REACT_APP_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget ,Give me a Hotels options list with\nHotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place\nDetails, Place Image Url, Geo Coordinates, ticket Pricing,rating,  Time to travel each of the location for 3 days with each day plan with best\ntime to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: "Okay, here's a possible 3-day Las Vegas itinerary for a couple on a budget, along with hotel options and a structured JSON output as requested.\n\n**Important Notes:**\n\n*   **Budget:** \"Cheap\" is relative in Vegas. This plan focuses on free and low-cost activities, utilizing walking and public transport, and opting for more affordable dining options.\n*   **Hotel Prices:** Prices are *estimates* and can fluctuate drastically depending on the time of year, day of the week, and booking platform. Check current prices on booking sites.\n*   **Walking:** This itinerary involves a fair amount of walking, especially on the Strip. Wear comfortable shoes.\n*   **Flexibility:** Feel free to adjust the plan to your interests and energy levels.\n*   **Food:** Budget-friendly options like fast food, inexpensive buffets (look for coupons), and grocery store snacks are assumed.\n\n**Hotel Options (Budget-Friendly)**\n\n```json\n{\n  \"hotels\": [\n    {\n      \"HotelName\": \"Circus Circus Hotel & Casino\",\n      \"Hotel address\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"Price\": \"$40 - $80 per night\",\n      \"hotel_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/28/05/5f/86/exterior.jpg\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.1253,\n        \"longitude\": -115.1680\n      },\n      \"rating\": 3.8,\n      \"descriptions\": \"A classic Las Vegas hotel with a circus theme, offering affordable rooms and family-friendly attractions.\"\n    },\n    {\n      \"HotelName\": \"Excalibur Hotel & Casino\",\n      \"Hotel address\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n       \"Price\": \"$50 - $90 per night\",\n      \"hotel_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/27/2f/97/6e/exterior.jpg\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.0987,\n        \"longitude\": -115.1747\n      },\n      \"rating\": 4.0,\n      \"descriptions\": \"A medieval-themed hotel with budget-friendly rates and a fun, casual atmosphere.\"\n    },\n     {\n      \"HotelName\": \"Strat Hotel, Casino & Skypod\",\n      \"Hotel address\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n       \"Price\": \"$50 - $100 per night\",\n      \"hotel_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/22/b9/4f/03/the-strat-hotel-casino.jpg\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.1457,\n        \"longitude\": -115.1571\n      },\n      \"rating\": 4.1,\n       \"descriptions\":\"Offers great views of the city with an observation tower and affordable rooms.\"\n    }\n    \n  ]\n}\n```\n\n**3-Day Itinerary (JSON Format)**\n\n```json\n{\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Heart of the Strip\",\n      \"best_time_to_visit\": \"Late afternoon/evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"A free, stunning display of floral arrangements and seasonal themes within the Bellagio Hotel.\",\n          \"place_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/29/b6/0d/09/bellagio-conservatory-botanical.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1736\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.8,\n          \"time_to_travel\": \"10 minutes walking from hotels.\"\n        },\n         {\n          \"placeName\": \"Bellagio Fountains\",\n           \"placeDetails\": \"A free, mesmerizing water show with music in front of the Bellagio Hotel.\",\n           \"place_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/24/0a/8f/61/bellagio-fountains.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1738\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.9,\n           \"time_to_travel\": \"Adjacent to Conservatory\"\n        },\n        {\n          \"placeName\": \"Walk the Las Vegas Strip\",\n          \"placeDetails\": \"Soak in the sights, sounds, and atmosphere of the iconic Strip. See the themed hotels and attractions.\",\n           \"place_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/24/a2/34/e7/the-strip.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.1164,\n             \"longitude\": -115.1726\n          },\n          \"ticketPricing\": \"Free (except for some attractions)\",\n          \"rating\": 4.5,\n            \"time_to_travel\": \"Continuous walk\"\n        },\n        {\n          \"placeName\": \"The LINQ Promenade\",\n            \"placeDetails\":\"Outdoor entertainment area with shops, restaurants, and the High Roller observation wheel\",\n            \"place_image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/24/0a/96/3a/linq-promenade.jpg\",\n          \"geo_coordinates\": {\n             \"latitude\":36.1168,\n             \"longitude\":-115.1696\n          },\n           \"ticketPricing\":\"Free to walk around, but attractions cost extra\",\n            \"rating\":4.5,\n            \"time_to_travel\":\"Walking distance from The Strip\"\n        },\n         {\n          \"placeName\":\"Mirage Volcano\",\n           \"placeDetails\":\"A free, simulated volcano eruption in front of the Mirage Hotel.\",\n           \"place_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/24/0a/96/0f/mirage-volcano.jpg\",\n           \"geo_coordinates\": {\n             \"latitude\":36.1212,\n             \"longitude\":-115.1752\n           },\n            \"ticketPricing\":\"Free\",\n           \"rating\":4.6,\n            \"time_to_travel\":\"Walking distance from The Linq Promenade\"\n          }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown Las Vegas & Fremont Experience\",\n      \"best_time_to_visit\": \"Afternoon and evening\",\n      \"places\": [\n         {\n          \"placeName\":\"Fremont Street Experience\",\n           \"placeDetails\":\"A pedestrian mall with a video canopy, free shows, and street performers. \",\n           \"place_image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/29/03/6b/94/fremont-street-experience.jpg\",\n            \"geo_coordinates\":{\n             \"latitude\":36.1698,\n             \"longitude\":-115.1401\n            },\n            \"ticketPricing\":\"Free\",\n           \"rating\":4.6,\n            \"time_to_travel\":\" 10-15 minutes by car or bus from hotels\"\n        },\n         {\n           \"placeName\": \"Container Park\",\n            \"placeDetails\":\"An outdoor shopping and entertainment area built from shipping containers. Features unique shops, restaurants, and a playground. \",\n             \"place_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/25/88/52/2f/container-park.jpg\",\n           \"geo_coordinates\":{\n             \"latitude\":36.1687,\n             \"longitude\":-115.1398\n           },\n          \"ticketPricing\":\"Free entry, attractions cost extra\",\n           \"rating\":4.3,\n          \"time_to_travel\": \"Adjacent to Fremont Street Experience\"\n          },\n        {\n          \"placeName\":\"Neon Museum (Outdoor)\",\n            \"placeDetails\":\"A glimpse of old Las Vegas through vintage neon signs (the Boneyard is ticketed, but the surrounding area is free to view).\",\n            \"place_image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/29/b6/08/3b/neon-museum.jpg\",\n             \"geo_coordinates\": {\n              \"latitude\": 36.1755,\n               \"longitude\": -115.1408\n             },\n           \"ticketPricing\":\"Free to view the exterior, tickets for the main Boneyard\",\n             \"rating\":4.7,\n           \"time_to_travel\": \"5 min walk from Fremont Street Experience\"\n           },\n         {\n            \"placeName\": \"Downtown Murals\",\n             \"placeDetails\": \"Explore the vibrant street art scene in downtown Las Vegas.\",\n              \"place_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/29/9b/c8/b9/downtown-las-vegas-murals.jpg\",\n            \"geo_coordinates\": {\n              \"latitude\":36.1699,\n               \"longitude\": -115.1404\n            },\n           \"ticketPricing\":\"Free\",\n           \"rating\":4.3,\n            \"time_to_travel\":\"Walking distance from Fremont Street \"\n          }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"South Strip & Relaxation\",\n      \"best_time_to_visit\": \"Morning/Afternoon\",\n      \"places\": [\n          {\n           \"placeName\": \"Mandalay Bay Beach (seasonal)\",\n          \"placeDetails\":\"A real sand beach with wave pools, lazy rivers (access for hotel guests, might offer day passes).\",\n          \"place_image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/26/55/16/68/mandalay-bay-beach.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\":36.0916,\n            \"longitude\":-115.1749\n           },\n            \"ticketPricing\":\"Access for hotel guests, day passes might be available\",\n           \"rating\":4.6,\n           \"time_to_travel\":\" 15 minutes by car or bus from hotels\"\n\n         },\n         {\n         \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n            \"placeDetails\": \"A must-see photo opportunity at the iconic Las Vegas sign.\",\n            \"place_image_url\":\"https://media-cdn.tripadvisor.com/media/photo-s/1a/7e/6d/31/welcome-to-fabulous-las.jpg\",\n           \"geo_coordinates\": {\n            \"latitude\":36.0826,\n            \"longitude\":-115.1725\n           },\n             \"ticketPricing\":\"Free\",\n            \"rating\":4.7,\n             \"time_to_travel\":\"10 minutes by car or bus from Mandalay Bay Beach\"\n          },\n           {\n           \"placeName\":\"Explore Hotel Themes\",\n           \"placeDetails\":\"Visit other hotels like Luxor, New York-New York, or Paris, each with a unique theme and ambiance. \",\n             \"place_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/23/f1/18/73/new-york-new-york-hotel.jpg\",\n            \"geo_coordinates\": {\n             \"latitude\": 36.1021,\n              \"longitude\": -115.1742\n              },\n             \"ticketPricing\":\"Free to enter, attractions cost extra\",\n            \"rating\":4.5,\n            \"time_to_travel\":\"Walkable distance along the Strip\"\n         },\n         {\n            \"placeName\":\"Pool Time or Relaxation\",\n            \"placeDetails\": \"Enjoy the hotel's pool, catch some sun, or relax before departure\",\n             \"place_image_url\": \"https://media-cdn.tripadvisor.com/media/photo-s/23/f1/19/d1/luxor-hotel.jpg\",\n             \"geo_coordinates\":{\n               \"latitude\":36.0954,\n               \"longitude\":-115.1744\n              },\n            \"ticketPricing\":\"Free with Hotel Accommodation\",\n             \"rating\":4.2,\n              \"time_to_travel\":\"At your hotel\"\n         }\n      ]\n    }\n  }\n}\n```\n\n**Additional Tips for Saving Money**\n\n*   **Transportation:** Walk as much as possible. Consider a day pass for the Deuce bus if needed.\n*   **Food:** Take advantage of happy hours for drinks and appetizers. Buy drinks and snacks from a grocery store rather than hotel shops.\n*   **Free Entertainment:** Plenty of free shows and attractions are available on the Strip and downtown.\n*   **Look for Discounts:** Search for coupons and deals on shows and attractions.\n*   **Travel Off-Season:** Avoid peak travel times for lower hotel rates and fewer crowds.\n*   **Pack Water and Snacks:** Save money by bringing your own water and snacks.\n*   **Free Wi-Fi:** Utilize free Wi-Fi hotspots in hotels, casinos, and cafes.\n\n**Disclaimer:** Prices, ratings, and timings can vary. Please verify these details on official sites before you travel.\n\nEnjoy your budget-friendly Vegas trip! Let me know if you have any other questions or need modifications.\n"},
      ],
    },
  ],
});

  export const AI_PROMPT =
  "Generate Travel Plan for Location :{location}, for {days} Days for {people} with a {budgetType} budget. Provide the output in JSON format.\n\nFor the 'hotels' section, include:\n- HotelName\n- Hotel address\n- Price (approximate range per night)\n- hotel_image_url (Provide a working image URL from Unsplash: [https://unsplash.com/])\n- geo coordinates (latitude and longitude)\n- rating (out of 5)\n- descriptions\n\nFor the 'itinerary' section, for each day:\n- theme of the day\n- best_time_to_visit (e.g., Morning, Afternoon, Evening)\n- places to visit (an array of):\n    - placeName\n    - Place Details\n    - place_image_url (Provide a working image URL from Unsplash: [https://unsplash.com/])\n    - Geo Coordinates (latitude and longitude)\n    - ticket Pricing (if applicable, otherwise 'Free' or 'Variable')\n    - rating (out of 5)\n    - Time to travel to the location (e.g., '10 minutes by walk', '15 minutes by car')\n\nEnsure all image URLs are functional and preferably sourced from Unsplash. If an exact image isn't available on Unsplash, use a relevant placeholder image from Unsplash. make sure to test the url as you are generating 404 make sure to get the perfect ones or use your google search and give the image urls";